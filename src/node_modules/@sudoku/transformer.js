// 将81位字符串转为9x9二维数组
function json2grid(sudokuStr) {
    if (typeof sudokuStr !== 'string' || sudokuStr.length !== 81) {
        throw new Error('输入字符串长度必须为81');
    }
    const grid = [];
    for (let i = 0; i < 9; i++) {
        const row = sudokuStr.slice(i * 9, (i + 1) * 9).split('').map(x => x === '.' ? 0 : Number(x));
        grid.push(row);
    }
    return grid;
}

// 将9x9二维数组转为81位字符串
function grid2json(grid) {
    if (!Array.isArray(grid) || grid.length !== 9 || grid.some(row => !Array.isArray(row) || row.length !== 9)) {
        throw new Error('输入必须为9x9二维数组');
    }
    return grid.flat().join('');
}

module.exports = {
    json2grid,
    grid2json
}; 